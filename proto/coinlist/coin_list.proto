syntax = "proto3";

package coinlist;

import "google/api/annotations.proto";
import "google/protobuf/timestamp.proto";

option go_package = "github.com/markpassawat/go-grpc-coinlist";

service CoinList {
	rpc GetCoins (Empty) returns (stream CoinInfo){	
		option (google.api.http) = {
		get: "/coins"
	  };
	}
	rpc GetCoin (Id) returns (CoinInfo){	
		option (google.api.http) = {
		get: "/coins/{coin_id}"
	  };
	}
	rpc CreateCoins (Id) returns (Status){	
		option (google.api.http) = {
		post: "/coins/{coin_id}"
		body: "*"
	  };
	}
	rpc UpdateCoins (CoinInfo) returns (Status){	
		option (google.api.http) = {
		patch: "/coins"
		body: "*"
	  };
	}
	rpc DeleteCoin (Id) returns (Status){	
		option (google.api.http) = {
		delete: "/coins/{coin_id}"
	  };
	}
	rpc SearchCoins (InputText) returns (stream CoinInfo){	
		option (google.api.http) = {
		get: "/search/{input_text}"
	  };
	}
}

message Empty{}

message CoinInfo {
    string Coin_id = 1;  
    string Symbol = 2;
	string Name = 3;
	string Image = 4;
	double Current_price = 5;
	int32 Market_cap_rank = 6;
	google.protobuf.Timestamp Create_at = 7;
	google.protobuf.Timestamp Update_at = 8;
}

message Id {
	string coin_id = 1; 
	string symbol = 2;
	string name = 3;
}

message Status {
	int32 status = 1; 
}

message InputText {
	string input_text = 1;
}